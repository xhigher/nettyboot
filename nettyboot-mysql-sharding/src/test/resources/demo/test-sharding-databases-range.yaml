dataSources:
  ds_2019: !!com.zaxxer.hikari.HikariDataSource
    driverClassName: com.mysql.jdbc.Driver
    jdbcUrl: jdbc:mysql://172.18.0.235:3306/demo_ds_2019?serverTimezone=UTC&useSSL=false&useUnicode=true&characterEncoding=UTF-8
    username: root
    password: 123456
  ds_2020: !!com.zaxxer.hikari.HikariDataSource
    driverClassName: com.mysql.jdbc.Driver
    jdbcUrl: jdbc:mysql://172.18.0.235:3306/demo_ds_2020?serverTimezone=UTC&useSSL=false&useUnicode=true&characterEncoding=UTF-8
    username: root
    password: 123456
  ds_2021: !!com.zaxxer.hikari.HikariDataSource
    driverClassName: com.mysql.jdbc.Driver
    jdbcUrl: jdbc:mysql://172.18.0.235:3306/demo_ds_2021?serverTimezone=UTC&useSSL=false&useUnicode=true&characterEncoding=UTF-8
    username: root
    password: 123456

shardingRule:
  tables:
    t_order: 
      actualDataNodes: ds_2019.t_order_20190$->{1..9},ds_2019.t_order_20191$->{0..2},ds_2020.t_order_20200$->{1..9},ds_2020.t_order_20201$->{0..2},ds_2021.t_order_20210$->{1..9},ds_2021.t_order_20211$->{0..2}
      databaseStrategy:
        standard:
          shardingColumn: ymd
          preciseAlgorithmClassName: com.nettyboot.mysql_sharding.algorithm.PreciseYmdYearShardingDatabaseAlgorithm
          rangeAlgorithmClassName: com.nettyboot.mysql_sharding.algorithm.RangeYmdYearShardingDatabaseAlgorithm
      tableStrategy:
        standard:
          shardingColumn: ymd
          preciseAlgorithmClassName: com.nettyboot.mysql_sharding.algorithm.PreciseYmdMonthShardingTableAlgorithm
          rangeAlgorithmClassName: com.nettyboot.mysql_sharding.algorithm.RangeYmdMonthShardingTableAlgorithm
#    t_order_item:
#      actualDataNodes: ds_${0..1}.t_order_item
#      keyGenerator:
#        type: SNOWFLAKE
#        column: order_item_id
#        props:
#          worker.id: 123
#  bindingTables:
#    - t_order,t_order_item
#  broadcastTables:
#    - t_address
  defaultDatabaseStrategy:
    standard:
      shardingColumn: ymd
      preciseAlgorithmClassName: com.nettyboot.mysql_sharding.algorithm.PreciseYmdYearShardingDatabaseAlgorithm
      rangeAlgorithmClassName: com.nettyboot.mysql_sharding.algorithm.RangeYmdYearShardingDatabaseAlgorithm
  defaultTableStrategy:
    none:

props:
  sql.show: true
